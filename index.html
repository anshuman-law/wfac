<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Writing for a Change 3D</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
  <!-- React + ReactDOM UMD -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel (compile JSX in-browser) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Three.js UMD -->
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
  <style>
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: #0d0d1a;
      color: #e0e0e0;
      overflow-x: hidden;
    }
    /* Fixed 3D canvas behind everything */
    #bg3d {
      position: fixed;
      inset: 0;
      z-index: 0;
    }
    /* Content sits above */
    #root {
      position: relative;
      z-index: 10;
    }
  </style>
</head>
<body>
  <canvas id="bg3d"></canvas>
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useRef, useState } = React;

    // ---------- Data ----------
    const THEMES = [
      "POWER DYNAMICS & GOVERNANCE",
      "ETHICS OF REPRESENTATION & WITNESSING",
      "MATERIALITY & INFRASTRUCTURE",
      "AFFECT & EMOTION",
      "FUTURES & IMAGINATION",
    ];

    const MODULES = [
      {
        id: "M1",
        color: "#1A2B4C",
        title: "Module 1: Narrative as Social Power",
        themes: ["POWER DYNAMICS & GOVERNANCE","MATERIALITY & INFRASTRUCTURE","AFFECT & EMOTION"],
        subs: [
          { h: "1.1 The Narrative Construction of Reality",
            bullets: [
              "Concepts: Narrative coherence, Performativity, Intra-action",
              "Theories/Lenses: Constructivism, New Materialisms, STS",
            ]},
          { h: "1.2 Master Narratives and Counter-Narratives",
            bullets: [
              "Concepts: Hegemony, Discourse, Ideology",
              "Theories/Lenses: Foucauldian discourse analysis, Gramscian hegemony",
            ]},
          { h: "1.3 Memes, Myths, and Collective Sense-Making",
            bullets: [
              "Concepts: Collective memory, Cultural scripts, Myth-making",
              "Theories/Lenses: Semiotics, Cultural studies",
            ]},
        ],
      },
      {
        id: "M2",
        color: "#228B22",
        title: "Module 2: Storytelling for Resistance and Transformation",
        themes: ["ETHICS OF REPRESENTATION & WITNESSING","AFFECT & EMOTION","FUTURES & IMAGINATION"],
        subs: [
          { h: "2.1 Testimonio and Bearing Witness",
            bullets: [
              "Concepts: Voice, Silence, Trauma, Solidarity",
              "Theories/Lenses: Critical race theory, Decolonial studies",
            ]},
          { h: "2.2 Strategic Essentialism and Identity Narratives",
            bullets: [
              "Concepts: Identity politics, Agency, Intersectionality",
              "Theories/Lenses: Postcolonial theory, Queer theory",
            ]},
          { h: "2.3 Mythopoesis and Re-imagining Futures",
            bullets: [
              "Concepts: Utopia, Dystopia, Speculative fiction",
              "Theories/Lenses: Futures studies, Critical pedagogy",
            ]},
        ],
      },
      {
        id: "M3",
        color: "#FFA500",
        title: "Module 3: Digital Storytelling and Narrative Democracies",
        themes: ["POWER DYNAMICS & GOVERNANCE","ETHICS OF REPRESENTATION & WITNESSING","MATERIALITY & INFRASTRUCTURE","AFFECT & EMOTION"],
        subs: [
          { h: "3.1 Platformed Testimonies and Digital Publics",
            bullets: [
              "Concepts: Networked publics, Affordances, Virality",
              "Theories/Lenses: Media ecology, Platform studies",
            ]},
          { h: "3.2 Data Colonialism and Algorithmic Governance",
            bullets: [
              "Concepts: Surveillance capitalism, Datafication, Bias",
              "Theories/Lenses: Critical data studies, Political economy of communication",
            ]},
          { h: "3.3 Viral Genres and Participatory Narratives",
            bullets: [
              "Concepts: Remix culture, Memetic spread, Fandom",
              "Theories/Lenses: Convergence culture, Audience studies",
            ]},
        ],
      },
      {
        id: "M4",
        color: "#800080",
        title: "Module 4: From Writer to Narrative Architect",
        themes: ["MATERIALITY & INFRASTRUCTURE","FUTURES & IMAGINATION"],
        subs: [
          { h: "4.1 Transmedia Storytelling and World-building",
            bullets: [
              "Concepts: Narrative universes, Canon, Lore",
              "Theories/Lenses: Transmedia studies, Narratology",
            ]},
          { h: "4.2 Immersive Narratives and Experiential Design",
            bullets: [
              "Concepts: Presence, Embodiment, Agency",
              "Theories/Lenses: Game studies, Interaction design",
            ]},
          { h: "4.3 Narrative Strategy and Social Impact Campaigns",
            bullets: [
              "Concepts: Persuasion, Framing, Advocacy",
              "Theories/Lenses: Communication for social change, Rhetoric",
            ]},
        ],
      },
      {
        id: "M5",
        color: "#808080",
        title: "Module 5: Ethics and Politics of Storytelling",
        themes: ["POWER DYNAMICS & GOVERNANCE","ETHICS OF REPRESENTATION & WITNESSING","AFFECT & EMOTION"],
        subs: [
          { h: "5.1 Voice, Silence, and Representation",
            bullets: [
              "Concepts: Authenticity, Appropriation, Stereotypes",
              "Theories/Lenses: Post-structuralism, Feminist theory",
            ]},
          { h: "5.2 The Right to Narrate and Narrative Justice",
            bullets: [
              "Concepts: Epistemic injustice, Restorative narratives, Reparation",
              "Theories/Lenses: Human rights discourse, Transitional justice",
            ]},
          { h: "5.3 Responsibility, Relationality, and Care in Storytelling",
            bullets: [
              "Concepts: Empathy, Vulnerability, Solidarity",
              "Theories/Lenses: Ethics of care, Phenomenology",
            ]},
        ],
      },
      {
        id: "M6",
        color: "#00CED1",
        title: "Module 6: Narrating with AI",
        themes: ["POWER DYNAMICS & GOVERNANCE","ETHICS OF REPRESENTATION & WITNESSING","MATERIALITY & INFRASTRUCTURE","FUTURES & IMAGINATION"],
        subs: [
          { h: "6.1 AI as Co-creator and Narrative Generator",
            bullets: [
              "Concepts: Generative models, Algorithmic creativity, Authorship",
              "Theories/Lenses: AI ethics, Human-computer interaction",
            ]},
          { h: "6.2 Bias, Algorithmic Memory, and Data Silos",
            bullets: [
              "Concepts: Algorithmic bias, Echo chambers, Filter bubbles",
              "Theories/Lenses: Critical algorithm studies, Information theory",
            ]},
          { h: "6.3 Future of Narrative, AI, and Human Experience",
            bullets: [
              "Concepts: Posthumanism, Singularity, Consciousness",
              "Theories/Lenses: Philosophy of technology, Cybernetics",
            ]},
        ],
      },
    ];

    // ---------- Three.js background ----------
    function useThreeBackground() {
      useEffect(() => {
        const canvas = document.getElementById("bg3d");
        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(60, 1, 0.1, 100);
        camera.position.set(0, 0, 10);

        const ambient = new THREE.AmbientLight(0xffffff, 0.15);
        scene.add(ambient);

        // Points
        const COUNT = 550;
        const positions = new Float32Array(COUNT * 3);
        const velocities = new Float32Array(COUNT * 3);
        for (let i = 0; i < COUNT; i++) {
          positions[i*3+0] = (Math.random() - 0.5) * 16;
          positions[i*3+1] = (Math.random() - 0.5) * 10;
          positions[i*3+2] = (Math.random() - 0.5) * 16;
          velocities[i*3+0] = (Math.random() - 0.5) * 0.01;
          velocities[i*3+1] = (Math.random() - 0.5) * 0.01;
          velocities[i*3+2] = (Math.random() - 0.5) * 0.01;
        }
        const geom = new THREE.BufferGeometry();
        geom.setAttribute("position", new THREE.BufferAttribute(positions, 3));
        const mat = new THREE.PointsMaterial({ size: 0.035, color: 0xffffff, transparent: true, opacity: 0.65 });
        const points = new THREE.Points(geom, mat);
        scene.add(points);

        // Gentle linking lines
        const lineGroup = new THREE.Group();
        scene.add(lineGroup);
        const PAIRS = 80;
        const endpoints = [];
        for (let i = 0; i < PAIRS; i++) {
          const a = new THREE.Vector3((Math.random()-0.5)*12, (Math.random()-0.5)*8, (Math.random()-0.5)*12);
          const b = new THREE.Vector3((Math.random()-0.5)*12, (Math.random()-0.5)*8, (Math.random()-0.5)*12);
          const vA = new THREE.Vector3((Math.random()-0.5)*0.008, (Math.random()-0.5)*0.008, (Math.random()-0.5)*0.008);
          const vB = new THREE.Vector3((Math.random()-0.5)*0.008, (Math.random()-0.5)*0.008, (Math.random()-0.5)*0.008);
          const geo = new THREE.BufferGeometry().setFromPoints([a, b]);
          const mat = new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.12 });
          const line = new THREE.Line(geo, mat);
          lineGroup.add(line);
          endpoints.push({ a, b, vA, vB, geo });
        }

        function resize() {
          const w = window.innerWidth;
          const h = window.innerHeight;
          renderer.setSize(w, h);
          camera.aspect = w / h;
          camera.updateProjectionMatrix();
        }
        resize();
        window.addEventListener("resize", resize);

        let t = 0;
        const animate = () => {
          // Animate points
          const arr = geom.attributes.position.array;
          for (let i = 0; i < COUNT; i++) {
            const i3 = i*3;
            arr[i3+0] += velocities[i3+0];
            arr[i3+1] += velocities[i3+1];
            arr[i3+2] += velocities[i3+2];
            // Soft bounds
            for (let k = 0; k < 3; k++) {
              if (arr[i3+k] > 10 || arr[i3+k] < -10) velocities[i3+k] *= -1;
            }
          }
          geom.attributes.position.needsUpdate = true;

          // Animate lines
          endpoints.forEach(e => {
            e.a.add(e.vA);
            e.b.add(e.vB);
            // Soft bounds
            ["x","y","z"].forEach(axis => {
              if (e.a[axis] > 8 || e.a[axis] < -8) e.vA[axis] *= -1;
              if (e.b[axis] > 8 || e.b[axis] < -8) e.vB[axis] *= -1;
            });
            e.geo.setFromPoints([e.a, e.b]);
          });

          // Slow camera drift
          t += 0.002;
          camera.position.x = Math.sin(t) * 0.6 + 0.0;
          camera.position.y = Math.cos(t * 0.7) * 0.4;
          camera.lookAt(0, 0, 0);

          renderer.render(scene, camera);
          requestAnimationFrame(animate);
        };
        animate();

        return () => {
          window.removeEventListener("resize", resize);
          renderer.dispose();
        };
      }, []);
    }

    // ---------- UI ----------
    function BackToTop() {
      const [show, setShow] = useState(false);
      useEffect(() => {
        const onScroll = () => setShow(window.scrollY > 300);
        window.addEventListener("scroll", onScroll);
        return () => window.removeEventListener("scroll", onScroll);
      }, []);
      return (
        <button
          onClick={() => window.scrollTo({ top: 0, behavior: "smooth" })}
          className={[
            "fixed bottom-8 right-8 z-[1000] rounded-full bg-blue-500 text-white shadow-xl w-12 h-12 text-xl transition duration-300",
            show ? "opacity-100 translate-y-0" : "opacity-0 translate-y-5",
          ].join(" ")}
          title="Back to Top"
        >
          ▲
        </button>
      );
    }

    function ThemeTags({ activeTheme, setActiveTheme }) {
      return (
        <div className="mt-16 mb-16 py-10 border-y border-white/10">
          <h2 className="text-center text-2xl font-bold mb-6 text-gray-100">Overarching Themes</h2>
          <div className="flex flex-wrap items-center justify-center gap-3">
            {THEMES.map(t => (
              <span
                key={t}
                className={[
                  "px-4 py-2 rounded-full text-sm font-semibold cursor-pointer shadow-sm transition",
                  activeTheme === t
                    ? "bg-blue-400 text-white shadow-blue-500/40"
                    : "bg-blue-500 hover:bg-blue-600 text-white",
                ].join(" ")}
                onClick={() => setActiveTheme(prev => (prev === t ? null : t))}
              >
                {t}
              </span>
            ))}
          </div>
        </div>
      );
    }

    function Submodule({ h, bullets }) {
      const [open, setOpen] = useState(false);
      return (
        <details
          className="bg-[#2a2a4a] border border-white/20 rounded-xl px-6 py-4 mb-3 overflow-hidden transition"
          open={open}
          onToggle={e => setOpen(e.target.open)}
        >
          <summary className="list-none flex items-center justify-between text-gray-200 font-semibold cursor-pointer">
            <span>{h}</span>
            <span className={["transition transform", open ? "rotate-90" : "rotate-0"].join(" ")}>▶</span>
          </summary>
          <div className="pt-3 text-sm leading-6 text-gray-300">
            <ul className="mt-2 space-y-1">
              {bullets.map((b, i) => (
                <li key={i} className="pl-4 relative"><span className="absolute left-0">•</span> {b}</li>
              ))}
            </ul>
          </div>
        </details>
      );
    }

    function ModuleCard({ m, activeTheme, index }) {
      const isFiltered = activeTheme && !m.themes.includes(activeTheme);
      return (
        <div
          className={[
            "rounded-2xl border backdrop-blur-sm p-6 mb-8 shadow-2xl transition will-change-transform",
            isFiltered ? "opacity-30 grayscale pointer-events-none scale-[0.98]" : "",
          ].join(" ")}
          style={{ backgroundColor: "#1a1a2e", borderColor: "rgba(255,255,255,0.08)" }}
        >
          <div className="flex items-center mb-4" style={{ color: m.color }}>
            <svg className="w-10 h-10 mr-3" viewBox="0 0 24 24">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              <path d="M4 19.5V15a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v4.5"></path>
              <path d="M12 13V9"></path>
              <path d="M10 11H14"></path>
            </svg>
            <h3 className="text-xl md:text-2xl font-extrabold text-gray-100">{m.title}</h3>
          </div>
          <div className="mt-3">
            {m.subs.map((s, i) => <Submodule key={i} h={s.h} bullets={s.bullets} />)}
          </div>
        </div>
      );
    }

    function Header() {
      return (
        <header className="pt-16 md:pt-24">
          <h1
            className="text-center uppercase tracking-tight text-gray-100"
            style={{ textShadow: "0 0 30px rgba(255,255,255,0.4)" }}
          >
            <span className="block text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-black leading-[0.95]">
              Writing for a Change 2.0
            </span>
          </h1>
          <div
            className="relative w-full max-w-5xl mx-auto mt-12 rounded-2xl overflow-hidden shadow-2xl"
          >
            <div className="relative" style={{ paddingBottom: "56.25%" }}>
              <iframe
                className="absolute inset-0 w-full h-full"
                src="https://www.youtube.com/embed/btkAvUiNvvc?autoplay=1&mute=1&controls=0&loop=1&playlist=btkAvUiNvvc"
                title="Course trailer"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowFullScreen
              ></iframe>
            </div>
          </div>
        </header>
      );
    }

    function App() {
      const [activeTheme, setActiveTheme] = useState(null);
      useThreeBackground();

      return (
        <div className="relative min-h-screen max-w-6xl mx-auto px-4 md:px-6 lg:px-8">
          <Header />
          <ThemeTags activeTheme={activeTheme} setActiveTheme={setActiveTheme} />
          <section className="mt-4 mb-24">
            {MODULES.map((m, i) => (
              <ModuleCard key={m.id} m={m} index={i} activeTheme={activeTheme} />
            ))}
          </section>
          <BackToTop />
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>

